
<!DOCTYPE html>
<!--
	Dok-gamelib engine

	Description: Dobuki game
	Author: jacklehamster
	Sourcode: https://github.com/jacklehamster/dok-game
	Year: 2021
 -->
<html lang="en">
	<head>
        <title>Dobuki Game</title>
		<meta charset="utf-8"/>
		<meta name="description" content="Dobuki Game Description">

		<style type="text/css">
			@font-face {
			  font-family: speech-font;
			  src: url(fonts/cartoon-script.ttf);
			}
			@font-face {
			  font-family: title-font;
			  src: url(fonts/american-captain.otf);
			}


			canvas {  
			  image-rendering: -moz-crisp-edges;
			  image-rendering: -webkit-crisp-edges;
			  image-rendering: pixelated;
			  image-rendering: crisp-edges;
			  border: 1px solid #666666;
			}

			html, body {
			    margin: 0;
			    height: 100%;
				background:
				  linear-gradient(27deg, rgba(255,100,100,.8), rgba(255,100,100,0) 70.71%),
				  linear-gradient(117deg, rgba(255,155,100,.8), rgba(255,155,100) 70.71%),
				  linear-gradient(236deg, rgba(255,100,155,.8), rgba(255,100,155,0) 70.71%);

			    color: #883366;
			    touch-action: none;
			    overflow: hidden;
			    user-select: none;
			}

			.mouse {
				user-select: text;
			}

			#overlay {
				position: absolute;
				top: 0;
				left: 0;
				height: 100vh;
				width: 100vw;
				opacity: 0;
				z-index: 100;
/*				cursor: -webkit-grab;
				cursor: -moz-grab;
				cursor: grab;
*/				-moz-user-select: none;
				-ms-user-select: none;
				-webkit-user-select: none;
				user-select: none;
			}

			#canvas {
				position: absolute;

				z-index: -1;
				top: 153px;
				width: 512px;
				height: 512px;
				background-color: #000000;
				opacity: 0;
  				transition-property: opacity, background-color;
  				transition-duration: .2s;
  			}

  			#im {
			  	outline: 0px solid transparent;  				
  			}

  			#title {
  				opacity: 0;  				
  				transition-property: opacity;
  				transition-duration: 1s;
  				color: lightgreen;
  				white-space:nowrap;
				text-shadow: 2px 2px darkgreen;
				font-family: title-font;
  			}

			.container {
			  display: flex;
			  flex-direction: row;
			  justify-content: center;
			  align-items: center;
			  width: 100%;
			  height: 100%;
			  will-change: transform;
			}

			.loader {
				border: 16px solid #f3f3f3;
				border-radius: 50%;
				border-top: 16px solid #3498db;
				border-left: 16px solid #54a8eb;
				border-right: 16px solid #84b8fb;
				border-bottom: 16px solid #a4d8fb;
				-webkit-animation: spin 2s linear infinite; /* Safari */
				animation: spin .3s linear infinite;
				width: 100px;
				height: 100px;
				margin-top: -50px;
				margin-left: -50px;
				position: absolute;
				top: 50%;
				left: 50%;
				position: fixed;
			}

			.loader.loaded {
				display: none;
			}

			.fps {
				position: absolute;
				color: white;
				z-index: 1
			}

			.code-editor {
			}

			#subject-name {
			    text-transform: uppercase;
			}

			.subject {
				color: white;
			    padding: 5px;
			    margin: 1px;
			}

			.subject.selected {
				color: black;
			    margin: 0px;
			    border: 1px solid black;
			    background-color: white;
			}

			.actions {
				color: white;
			    padding: 5px;
			    margin: 1px;
			    cursor: pointer;
			    display: flex;
			    flex-direction: horizontal;
			}

			.action {
				text-decoration: underline;
				margin-left: 10px;
			}

			.action:hover {
				color: yellow;
				font-weight: bold;
			}

			.speech-bubble {
				position: absolute;
				background: #ffffff;
				border-radius: .4em;
				z-index: 99;
				width: 200px;
				/*height: 60px;*/
				padding: 10px;
			    box-shadow: 1px 1px 0px 0px black;
			    /*display: none;*/
			    opacity: 0;
			    font-family: speech-font;
			    font-size: 10pt;
			    color: black;

  				transition-property: opacity;
  				transition-duration: 1s;
			}

			.speech-bubble:after {
				content: '';
				position: absolute;
				bottom: 0;
				left: 50%;
				width: 0;
				height: 0;
				border: 24px solid transparent;
				border-top-color: #ffffff;
				border-bottom: 0;
				border-right: 0;
				margin-left: -12px;
				margin-bottom: -24px;
			}

			.inventory-item {
				cursor: pointer;
				padding: 2px 5px;
				margin: 1px 5px;
			}

			.inventory-item.selected {
				cursor:;
				border: 1px solid black;
				margin: 0px 4px;
			}

			@-webkit-keyframes spin {
			  0% { -webkit-transform: rotate(0deg); }
			  100% { -webkit-transform: rotate(360deg); }
			}

			@keyframes spin {
			  0% { transform: rotate(0deg); }
			  100% { transform: rotate(360deg); }
			}			

			.centered {
			  position: fixed;
			  top: 50%;
			  left: 50%;
			  z-index: 2000;
			}

			#game-over {
				position: absolute;
				background-color: black;
				top: 0;
				left: 0;
				height: 100vh;
				width: 100vw;
				opacity: 0.8;
				z-index: 1000;
/*				cursor: -webkit-grab;
				cursor: -moz-grab;
				cursor: grab;
*/				-moz-user-select: none;
				-ms-user-select: none;
				-webkit-user-select: none;
				user-select: none;
				display: none;
			}

			.restart {
				  margin-top: -50px;
				  margin-left: -100px;
  				width: 200px;
				height: 100px;
				font-size: 30pt;
				display: none;
			}

			#game-over-message {
				width: 600px;
				margin-left: -300px;
				margin-top: -250px;
				font-size: 24pt;
				display: none;
			}
		</style>

	</head>
	<body>
		<!-- https://www.beepbox.co/#8n31sbk0l00e0ft3em0a7g0fj07i0r1o3210T5v0L4u50q1d5f8y1z6C1c0h0H-JJAArrqiih999T6v1L4u77q1d1f7y4z1C1c2W79T1v0L4u55q1d1f9y0z6C1c0A4F2B4V1Q40c0Pd73bE0111T3v3L4u03q0d1f8y0z1C2S-JIAArrrrrqiiiib4x8Qd18ilBoi4zgR4x8Qd14h8Och4icz4h4h414h4h0p23dFE-y-y38X2eQzEF8W2eH04t17hihO97ghQkRkRqGa2e2FKI8W2eyMzG8Zd517rj8Op7ghQkRkQWiewzEAieIzEbWyeAzRlmSng5dlJJJtBJd9jpvhSqq_3FU2tDwdv9ePMaDmt_v9YEUeEUckR_52qfiwcEWv2koz0phvgnQp2z4rsGwUY5Cz0K8WkkQpk0hQklAt17mhQ4o0 -->
		<div id="title" style="user-select: text; position: absolute; top: 80px; left:300px; z-index: 300; font-size: 40pt"><span id="im" contenteditable="true">THE IMPOSSIBLE ROOM</span></div>
		<div id="overlay" ondrop="game.onDropMouse(event)" ondragover="(event.preventDefault())"></div>
		<div id="game-over"></div>
		<div class="centered" id="game-over-message"></div>
		<button id="restart" class="centered restart">Restart</button>
		<div class="speech-bubble" id="speech-bubble" style="left: 50px;"></div>
		<audio id="audio" src="audio/weirdsong.mp3" style="position: absolute; display: none" loop></audio>
		<audio id="hit-audio" src="audio/hit-land.mp3" style="position: absolute; display: none"></audio>
		<audio id="pickup-audio" src="audio/pickup.mp3" style="position: absolute; display: none"></audio>
		<div id="info-box" style="position: absolute; z-index: 10"></div>
		<div class="container">
			<div style="position:absolute; top: 20px; left: 100px">
				<span id="score"></span>
				<span id="chocolate"></span>
				<span id="dino"></span>
			</div>
			<canvas id="canvas"  ondrop="console.log(event)" style="position: absolute; top: 50px; left: 100px" width=64 height=64></canvas>
		</div>
		<div id="actions" style="position: absolute; top: 460px; left: 400px; display: flex; flex-direction: : horizontal; z-index: 121;">
			<div id="subject" class="subject">
				<div id="subject-name"></div>
			</div>
			<div class="actions" id="subject-actions"></div>
		</div>
		<div id="inventory" style="position: absolute; top: 460px; left: 100px; z-index: 141; display: flex; flex-direction: horizontal">
		</div>
		<div id="controls" style="position: absolute; top: 490px; left: 100px; z-index: 131">
			<div><span id="mouse" class="mouse" draggable="true" style=>üêÅ</span>: Use mouse to move Monkor.</div>
			<div><span id="speaker">üîá</span>: Press M to <span id="mute">mute</span></div>
			<div>üîÅ: <span id="pressing-r">R to start over.</span></div>
		</div>
		<script type="text/javascript" src="lib/texture/image-loader.js"></script>
		<script type="text/javascript" src="game-core.js"></script>
		<script type="text/javascript" src="game.js"></script>
		<script type="text/javascript" src="gen/data.js"></script>
		<script type="text/javascript" src="lib/utils/chrono.js"></script>
		<script type="text/javascript" src="lib/math/gl-matrix.js"></script>
		<script type="text/javascript" src="lib/opengl/buffer-renderer.js"></script>
		<script type="text/javascript" src="lib/opengl/shader.js"></script>
		<script type="text/javascript" src="lib/opengl/utils.js"></script>
		<script type="text/javascript" src="lib/renderer/sprite-renderer.js"></script>
		<script type="text/javascript" src="lib/texture/texture-atlas.js"></script>
		<script type="text/javascript" src="lib/texture/texture-manager.js"></script>
		<script type="text/javascript" src="lib/sprite/sprite.js"></script>
		<script type="text/javascript" src="lib/sprite/sprite-collection.js"></script>
		<script type="text/javascript" src="lib/engine.js"></script>
		<script type="text/javascript" src="lib/ui/keyboard-handler.js"></script>
		<script type="text/javascript" src="lib/ui/focus-fixer.js"></script>
		<script type="text/javascript" src="lib/newgrounds/newgroundsio.min.js"></script>
		<script type="text/javascript" src="lib/newgrounds/ng.js"></script>
	</body>
</html>
